// Generated by CoffeeScript 1.6.3
(function() {
  var OverlayManager, getACar,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  OverlayManager = (function() {
    function OverlayManager() {
      this.toggleOverlay = __bind(this.toggleOverlay, this);
      this.container = $("div.container");
      this.triggerBttn = $("#trigger-overlay");
      this.overlay = $("div.overlay");
      this.closeBttn = this.overlay.find("button.overlay-close");
      this.transEndEventNames = {
        WebkitTransition: "webkitTransitionEnd",
        MozTransition: "transitionend",
        OTransition: "oTransitionEnd",
        msTransition: "MSTransitionEnd",
        transition: "transitionend"
      };
      this.transEndEventName = this.transEndEventNames[Modernizr.prefixed("transition")];
      this.support = {
        transitions: Modernizr.csstransitions
      };
      this.triggerBttn.on("click", this.toggleOverlay);
      this.closeBttn.on("click", this.toggleOverlay);
    }

    OverlayManager.prototype.toggleOverlay = function(e) {
      var onEndTransitionFn, _clicked,
        _this = this;
      e.preventDefault();
      _clicked = $(this);
      if (this.overlay.hasClass("open")) {
        this.overlay.removeClass("open");
        this.container.removeClass("overlay-open");
        this.overlay.addClass("close");
        onEndTransitionFn = function(ev) {
          if (_this.support.transitions) {
            if (ev.propertyName !== "visibility") {
              return;
            }
            _clicked.off(_this.transEndEventName, onEndTransitionFn);
          }
          _this.overlay.removeClass("close");
        };
        if (this.support.transitions) {
          this.overlay.on(this.transEndEventName, onEndTransitionFn);
        } else {
          onEndTransitionFn();
        }
      } else if (!this.overlay.hasClass("close")) {
        this.overlay.addClass("open");
        this.container.addClass("overlay-open");
      }
    };

    return OverlayManager;

  })();

  getACar = {
    start: function() {
      var overLayManager;
      return overLayManager = new OverlayManager();
    }
  };

  $(function() {
    return getACar.start();
  });

}).call(this);
